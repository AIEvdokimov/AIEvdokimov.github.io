<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è API</title>
  <style>
    body { font-family: Arial; max-width: 900px; margin: 30px auto; padding: 20px; }
    nav { margin-bottom: 20px; }
    nav button {
      margin: 5px;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #007bff;
      color: #fff;
      font-size: 14px;
    }
    nav button.active { background: #0056b3; }
    .page { display: none; margin-top: 10px; padding: 15px; border-radius: 8px; background: #f7f7f7; }
    .page.active { display: block; }
    .fact { font-size: 24px; }
    .joke { font-size: 22px; }
    .anekdot { font-size: 22px; line-height: 1.4; }
    .proverb { font-size: 24px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>üß™ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è API</h1>

  <nav>
    <button onclick="showPage('cats')" id="btn-cats">üê± –ö–æ—Ç–∏–∫–∏</button>
    <button onclick="showPage('jokes')" id="btn-jokes">üòÇ –®—É—Ç–∫–∏</button>
    <button onclick="showPage('weather')" id="btn-weather">üå§ –ü–æ–≥–æ–¥–∞</button>
    <button onclick="showPage('anekdots')" id="btn-anekdots">ü§£ –ê–Ω–µ–∫–¥–æ—Ç—ã</button>
    <button onclick="showPage('proverbs')" id="btn-proverbs">üìú –ü–æ—Å–ª–æ–≤–∏—Ü—ã</button>
    <button onclick="showPage('task1')" id="btn-task1">‚ö° –ó–∞–¥–∞—á–∞ 1</button>
  </nav>

  <!-- –ö–æ—Ç–∏–∫–∏ -->
  <section id="page-cats" class="page">
    <h2>üê± –ö–æ—Ç–∏–∫–∏ + –ü–µ—Ä–µ–≤–æ–¥</h2>
    <button onclick="getTranslatedCat()">üêæ –§–∞–∫—Ç + –ü–µ—Ä–µ–≤–æ–¥</button>
    <div id="cats-result">–ñ–º–∏!</div>
  </section>

  <!-- –®—É—Ç–∫–∏ -->
  <section id="page-jokes" class="page">
    <h2>üòÇ –®—É—Ç–∫–∏ API</h2>
    <button onclick="getJoke()">–ü–æ–ª—É—á–∏—Ç—å —à—É—Ç–∫—É</button>
    <div id="jokes-result">–ñ–º–∏ –∫–Ω–æ–ø–∫—É!</div>
  </section>

  <!-- –ü–æ–≥–æ–¥–∞ -->
  <section id="page-weather" class="page">
    <h2>üå§ –ü–æ–≥–æ–¥–∞ API</h2>
    <input id="city" placeholder="–ú–æ—Å–∫–≤–∞, London, Paris...">
    <button onclick="getWeather()">–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É</button>
    <div id="weather-result">–í–≤–µ–¥–∏ –≥–æ—Ä–æ–¥</div>
  </section>

  <!-- –ê–Ω–µ–∫–¥–æ—Ç—ã -->
  <section id="page-anekdots" class="page">
    <h2>ü§£ –ê–Ω–µ–∫–¥–æ—Ç—ã</h2>
    <button onclick="getAnekdot()">–ù–æ–≤—ã–π –∞–Ω–µ–∫–¥–æ—Ç üá∑üá∫</button>
    <div id="anekdot-result">–ñ–º–∏ –∫–Ω–æ–ø–∫—É!</div>
  </section>

  <!-- –ü–æ—Å–ª–æ–≤–∏—Ü—ã -->
  <section id="page-proverbs" class="page">
    <h2>üìú –ü–æ—Å–ª–æ–≤–∏—Ü—ã</h2>
    <button onclick="getProverb()">–°–ª—É—á–∞–π–Ω–∞—è –ø–æ—Å–ª–æ–≤–∏—Ü–∞</button>
    <div id="proverb-result">–ñ–º–∏!</div>
  </section>

  <!-- –ó–∞–¥–∞—á–∞ -->
  <section id="page-task1" class="page">
    <h2>‚ö° –ó–∞–¥–∞—á–∞ 1</h2>
    <textarea id="code" placeholder="–ù–∞–ø–∏—à–∏ fetch –∫ –ª—é–±–æ–º—É API..." style="width:100%;height:100px;">fetch('https://api.github.com/users/AIEvdokimov')</textarea><br>
    <button onclick="runCode()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥</button>
    <div id="task-result">–¢–≤–æ–π –∫–æ–¥ –∑–¥–µ—Å—å</div>
  </section>

  <p style="margin-top: 30px;"><a href="index.html">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>

  <script>
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏
    function showPage(name) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
      document.getElementById('page-' + name).classList.add('active');
      document.getElementById('btn-' + name).classList.add('active');
    }
    showPage('cats'); // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

    // üê± –ö–û–¢–ò–ö–ò
    async function getTranslatedCat(){
      const result = document.getElementById('cats-result');
      result.innerHTML = '‚è≥ –õ–æ–≤–ª—é –∫–æ—Ç–∏–∫–∞...';
      try {
        const catRes = await fetch('https://catfact.ninja/fact');
        const catData = await catRes.json();
        const translateRes = await fetch('https://libretranslate.com/translate', {
          method: 'POST',
          body: JSON.stringify({
            q: catData.fact,
            source: 'en',
            target: 'ru',
            format: 'text'
          }),
          headers: {'Content-Type': 'application/json'}
        });
        const translated = await translateRes.json();
        result.innerHTML = `
          <div class="fact">${translated.translatedText}</div>
          <p><small>–û—Ä–∏–≥–∏–Ω–∞–ª: ${catData.fact}</small></p>
        `;
      } catch(e) {
        result.innerHTML = 'üòø –ö–æ—Ç–∏–∫ –ø–æ—Ç–µ—Ä—è–ª—Å—è';
      }
    }

    // üòÇ –®–£–¢–ö–ò
    async function getJoke() {
      const result = document.getElementById('jokes-result');
      result.innerHTML = '‚è≥ –õ–æ–≤–ª—é —à—É—Ç–∫—É...';
      try {
        const res = await fetch('https://official-joke-api.appspot.com/random_joke');
        const data = await res.json();
        result.innerHTML = `
          <div class="joke">${data.setup}</div>
          <p><strong>${data.punchline}</strong></p>
        `;
      } catch(e) {
        result.innerHTML = 'üòø –®—É—Ç–∫–∞ –Ω–µ –∑–∞—à–ª–∞';
      }
    }

    // üå§ –ü–û–ì–û–î–ê
    async function getWeather() {
      const city = document.getElementById('city').value || 'Moscow';
      const result = document.getElementById('weather-result');
      result.innerHTML = '‚è≥ –ó–∞–≥—Ä—É–∂–∞—é...';
      try {
        const res = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1&language=ru`);
        const data = await res.json();
        if (data.results?.[0]) {
          const {latitude, longitude} = data.results[0];
          const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&temperature_unit=celsius&wind_speed_unit=kmh&precipitation_unit=mm&timezone=auto`);
          const weather = await weatherRes.json();
          const w = weather.current_weather;
          result.innerHTML = `
            <h3>${city}</h3>
            <p>üå°Ô∏è ${w.temperature}¬∞C</p>
            <p>üí® ${w.windspeed} –∫–º/—á</p>
          `;
        } else {
          result.innerHTML = '‚ùå –ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω';
        }
      } catch(e) {
        result.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–≥–æ–¥—ã';
      }
    }

    // ü§£ –ê–ù–ï–ö–î–û–¢–´ (–∑–∞–º–µ–Ω–∏–ª –Ω–∞ –ø—Ä–æ–∫—Å–∏)
    async function getAnekdot() {
      const result = document.getElementById('anekdot-result');
      result.innerHTML = '‚è≥ –õ–æ–≤–ª—é –∞–Ω–µ–∫–¥–æ—Ç...';
      try {
        const res = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent('http://rzhunemogu.ru/RandJSON.aspx?CType=1'));
        const text = await res.text();
        const json = text.match(/\[.*\]/)[0];
        const data = JSON.parse(json);
        result.innerHTML = `<div class="anekdot">${data[0]}</div>`;
      } catch(e) {
        result.innerHTML = 'üòø –ê–Ω–µ–∫–¥–æ—Ç—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å';
      }
    }

    // üìú –ü–û–°–õ–û–í–ò–¶–´
    const proverbs = [
      "–ù–µ –≤—Å–µ —Ç–æ –∑–æ–ª–æ—Ç–æ, —á—Ç–æ –±–ª–µ—Å—Ç–∏—Ç",
      "–í–æ–ª–∫–æ–≤ –±–æ—è—Ç—å—Å—è - –≤ –ª–µ—Å –Ω–µ —Ö–æ–¥–∏—Ç—å", 
      "–ö—Ç–æ —Ä–∞–Ω–æ –≤—Å—Ç–∞–µ—Ç - —Ç–æ–º—É –ë–æ–≥ –ø–æ–¥–∞–µ—Ç",
      "–î–µ–ª—É –≤—Ä–µ–º—è - –ø–æ—Ç–µ—Ö–µ —á–∞—Å",
      "–°–µ–º—å —Ä–∞–∑ –æ—Ç–º–µ—Ä—å - –æ–¥–∏–Ω –æ—Ç—Ä–µ–∂—å",
      "–ü–æ–¥ –ª–µ–∂–∞—á–∏–π –∫–∞–º–µ–Ω—å –≤–æ–¥–∞ –Ω–µ —Ç–µ—á–µ—Ç"
    ];
    function getProverb() {
      const random = proverbs[Math.floor(Math.random() * proverbs.length)];
      document.getElementById('proverb-result').innerHTML = `<div class="proverb">¬´${random}¬ª</div>`;
    }

    // ‚ö° –ó–ê–î–ê–ß–ê 1
    function runCode() {
      const code = document.getElementById('code').value;
      const result = document.getElementById('task-result');
      result.innerHTML = '‚è≥ –í—ã–ø–æ–ª–Ω—è—é...';
      try {
        eval(code).then(data => {
          result.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
        }).catch(e => {
          result.innerHTML = `‚ùå –û—à–∏–±–∫–∞: ${e.message}`;
        });
      } catch(e) {
        result.innerHTML = `‚ùå –°–∏–Ω—Ç–∞–∫—Å–∏—Å: ${e.message}`;
      }
    }
  </script>
</body>
</html>
